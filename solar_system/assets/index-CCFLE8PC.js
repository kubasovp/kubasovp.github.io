(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function l(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(i){if(i.ep)return;i.ep=!0;const r=l(i);fetch(i.href,r)}})();const o={fitMode:"cover",showLabels:!1,scale:1,planetScale:2e3,cx:0,cy:0,YEAR_MS:2e3,lastTime:performance.now()};let t,s;function y(e){s=e,t=e.getContext("2d")}const d=[{name:"Mercury",dist:58,diameter:4879,period:.24,color:"gray",eccentricity:.205},{name:"Venus",dist:108,diameter:12104,period:.62,color:"khaki",eccentricity:.007},{name:"Earth",dist:150,diameter:12742,period:1,color:"deepskyblue",eccentricity:.017},{name:"Mars",dist:228,diameter:6792,period:1.88,color:"tomato",eccentricity:.093},{name:"Jupiter",dist:778,diameter:139820,period:11.86,color:"orange",eccentricity:.049},{name:"Saturn",dist:1430,diameter:116460,period:29.46,color:"gold",eccentricity:.056},{name:"Uranus",dist:2870,diameter:50724,period:84,color:"lightblue",eccentricity:.046},{name:"Neptune",dist:4500,diameter:49244,period:165,color:"blue",eccentricity:.01}].map(e=>({...e,angle:Math.random()*Math.PI*2}));function u(e,n){e.width=window.innerWidth,e.height=window.innerHeight,o.cx=e.width/2,o.cy=e.height/2;const l=Math.max(...d.map(i=>i.dist)),c=o.fitMode==="cover"?Math.max(e.width,e.height):Math.min(e.width,e.height);o.scale=(c-32)/2/l,o.planetScale=e.width<768?4800:2e3,n.style.display=e.width===e.height?"none":"inline-flex"}function g({speedSlider:e,speedLabel:n,fitRadios:l,modeLabel:c,labelsToggle:i,canvas:r}){e.addEventListener("input",()=>{o.YEAR_MS=+e.value,n.textContent=`1 год = ${(o.YEAR_MS/1e3).toFixed(1)} сек`}),l.forEach(a=>{a.addEventListener("change",p=>{o.fitMode=p.target.value,u(r,c)})}),i.addEventListener("change",a=>{o.showLabels=a.target.checked}),window.addEventListener("resize",()=>u(r,c))}function M(e){for(let n of d){const l=2*Math.PI/(n.period*(o.YEAR_MS/1e3));n.angle+=l*(e/1e3)}}function w(){for(let e of d){const n=e.dist*o.scale,l=n*Math.sqrt(1-(e.eccentricity||0)**2),c=o.cx+n*Math.cos(e.angle),i=o.cy+l*Math.sin(e.angle),r=Math.max(1,e.diameter/o.planetScale/2);t.beginPath(),t.arc(c,i,r,0,2*Math.PI),t.fillStyle=e.color,t.fill(),o.showLabels&&(t.fillStyle="white",t.fillText(e.name,c+r,i-r))}}function b(){t.clearRect(0,0,s.width,s.height),t.beginPath(),t.arc(o.cx,o.cy,3,0,2*Math.PI),t.fillStyle="yellow",t.fill(),t.beginPath(),t.moveTo(o.cx,o.cy),t.lineTo(s.width,o.cy),t.strokeStyle="rgba(255,255,255,0.5)",t.setLineDash([4,4]),t.stroke(),t.setLineDash([])}function x(){t.font="10px sans-serif",t.fillStyle="white",t.textAlign="left",t.textBaseline="top";for(let e of d){const n=e.dist*o.scale,l=n*Math.sqrt(1-(e.eccentricity||0)**2),c=o.cx,i=o.cy;t.beginPath(),t.ellipse(c,i,n,l,0,0,2*Math.PI),t.strokeStyle="rgba(255,255,255,0.2)",t.stroke(),["Mars","Jupiter","Saturn","Uranus","Neptune"].includes(e.name)&&t.fillText(`${e.dist} млн км`,c+n-4,i+4)}}function h(e){const n=e-o.lastTime;o.lastTime=e,M(n),b(),x(),w(),requestAnimationFrame(h)}const f=document.getElementById("solar"),S=document.querySelector(".controls__slider"),L=document.querySelector(".controls__value"),P=document.querySelectorAll("input[name='fitMode']"),m=document.querySelector(".fit-label"),E=document.getElementById("labelsToggle");y(f);u(f,m);g({speedSlider:S,speedLabel:L,fitRadios:P,modeLabel:m,labelsToggle:E,canvas:f});requestAnimationFrame(h);
